<!-- Carga y estructura -->
<app-preloader *ngIf="isLoading"></app-preloader>
<app-header></app-header>
<app-sidebar-left></app-sidebar-left>
<app-sidebar-right></app-sidebar-right>

<!-- Contenido principal -->
<div class="content-wrapper">
  <section class="content">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <!-- Buscador -->
          <div class="input-group mb-3">
            <label for="id_search_value" class="visually-hidden">Buscar producto o servicio</label>
            <input
              id="id_search_value"
              type="text"
              class="form-control"
              placeholder="Ingrese nombre de producto o servicio"
              [(ngModel)]="filtro"
              (input)="filtrarProductos()"
              (keyup.enter)="busquedaDirecta()"
              aria-describedby="search-button" />
            <div class="input-group-append">
              <button
                id="search-button"
                (click)="busquedaDirecta()"
                class="btn btn-warning"
                type="button"
                aria-label="Buscar">
                <i class="fas fa-search"></i>
              </button>
            </div>
          </div>

          <!-- Servicios por ciudad -->
          <div class="card" *ngIf="data_servicios_ciudad?.length">
            <div class="card-header">
              <h3 class="card-title">{{ dataInit.tituloServiciosCiudad }}</h3>
            </div>
            <div class="card-body">
              <div id="id_slider_servicios_ciudad" class="row">
                <div
                  class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3"
                  *ngFor="let item of data_servicios_ciudad; trackBy: trackById">
                  <div
                    id="id_producto_ciudad_{{ item.id }}"
                    class="info-box bg-info cursor_selector_pro"
                    (click)="showServiciosCiudad(item)"
                    (keyup.enter)="showServiciosCiudad(item)"
                    role="button"
                    tabindex="0">
                    <img
                      [src]="item.icono"
                      [alt]="item.nombre"
                      loading="lazy"
                      class="img-fluid"
                      style="max-width: 96px; max-height: 96px;" />
                    <div class="info-box-content">
                      <p [innerText]="customerLine(item.nombre, 20)"></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Productos favoritos -->
          <div class="card" *ngIf="data_producto_favoritos?.length">
            <div class="card-header">
              <h3 class="card-title">{{ dataInit.tituloFavoritos }}</h3>
            </div>
            <div class="card-body">
              <div id="id_slider_favoritos" class="row">
                <div
                  class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3"
                  *ngFor="let item of data_producto_favoritos; trackBy: trackById">
                  <div
                    id="id_producto_favorito_{{ item.id }}"
                    class="info-box bg-warning cursor_selector_pro"
                    (click)="showProductosFavorito(item)"
                    (keyup.enter)="showProductosFavorito(item)"
                    role="button"
                    tabindex="0">
                    <img
                      [src]="item.icono"
                      [alt]="item.nombre"
                      loading="lazy"
                      class="img-fluid"
                      style="max-width: 96px; max-height: 96px;" />
                    <div class="info-box-content">
                      <p [innerText]="customerLine(item.nombre, 20)"></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Tipos de producto -->
          <div class="card" *ngIf="data_tipos?.length">
            <div class="card-header">
              <h3 class="card-title">{{ dataInit.tituloTipo }}</h3>
            </div>
            <div class="card-body">
              <div id="id_slider_tipos" class="row">
                <div
                  class="col-12 col-sm-6 col-md-4 col-lg-3 mb-3"
                  *ngFor="let item of data_tipos; trackBy: trackById">
                  <div
                    id="id_tipo_producto_{{ item.id }}"
                    class="info-box bg-gradient-blue cursor_selector_pro"
                    (click)="showCategoria(item)"
                    (keyup.enter)="showCategoria(item)"
                    role="button"
                    tabindex="0">
                    <img
                      [src]="item.icono"
                      [alt]="item.nombre"
                      loading="lazy"
                      class="img-fluid"
                      style="max-width: 96px; max-height: 96px;" />
                    <div class="info-box-content">
                      <p [innerText]="customerLine(item.nombre, 20)"></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Resultado vacÃ­o -->
          <ng-template #noResults>
            <div class="alert alert-info text-center mt-3">
              No se encontraron resultados.
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </section>
</div>